
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-World Browser-Use Test - Facebook-like Scenarios</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f0f0f0; }
        .container { max-width: 1200px; margin: 0 auto; }
        .test-section { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .header { background: #1877f2; color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .search-container { position: relative; }
        .search-icon { 
            position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
            cursor: pointer; font-size: 20px; color: #666;
        }
        .search-input { 
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 20px;
            font-size: 16px; display: none;
        }
        .search-input.visible { display: block; }
        .hidden-element { 
            background: #e3f2fd; border: 2px dashed #2196f3; padding: 15px; margin: 10px 0;
            display: none; border-radius: 8px;
        }
        .hidden-element.visible { display: block; }
        .iframe-container { border: 2px solid #007bff; padding: 10px; margin: 10px 0; background: #f8f9fa; }
        iframe { width: 100%; height: 200px; border: 1px solid #ddd; }
        button { padding: 10px 20px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .success { background: #28a745; color: white; }
        .warning { background: #ffc107; color: black; }
        .danger { background: #dc3545; color: white; }
        .info { background: #17a2b8; color: white; }
        .log { background: #f8f9fa; border: 1px solid #dee2e6; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: monospace; }
        .click-counter { font-weight: bold; color: #007bff; }
        .test-info { background: #e7f3ff; border-left: 4px solid #007bff; padding: 15px; margin: 15px 0; }
        .role-section { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 15px 0; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧪 Real-World Browser-Use Test</h1>
            <p>Testing the actual browser_use system with Facebook-like scenarios</p>
        </div>
        
        <div class="test-section">
            <h2>📊 Test Status</h2>
            <div id="status">Ready to test real browser_use system...</div>
            <div class="log" id="click-log">Click log will appear here...</div>
        </div>

        <div class="test-section">
            <h2>🔍 Test 1: Facebook-like Hidden Search (Real-World Scenario)</h2>
            <div class="test-info">
                <strong>What we're testing:</strong> This mimics Facebook where the search input is hidden until you click the magnifying glass icon.
                <br><strong>Expected behavior:</strong> browser_use should detect the search icon, click it, then find the revealed search input.
            </div>
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="Search for people, places, or things...">
                <div class="search-icon" id="search-icon" onclick="toggleSearch()">🔍</div>
            </div>
            <div id="search-result">Search input is hidden. Click the magnifying glass to reveal it.</div>
        </div>

        <div class="test-section">
            <h2>🎯 Test 2: Hidden Elements Revealed by Clicks</h2>
            <div class="test-info">
                <strong>What we're testing:</strong> Elements that are hidden but become visible after clicking a trigger button.
                <br><strong>Expected behavior:</strong> browser_use should detect the trigger, click it, then find the newly visible elements.
            </div>
            <button id="reveal-btn" class="info" onclick="revealHiddenElements()">🔓 Click to Reveal Hidden Elements</button>
            <div id="hidden-element-1" class="hidden-element">
                <h4>Hidden Element 1 (Now Visible!)</h4>
                <p>This element was hidden but is now visible after clicking the reveal button.</p>
                <button id="hidden-btn-1" class="success" onclick="handleClick('hidden-1')">Click Me (Hidden Element 1)</button>
            </div>
            <div id="hidden-element-2" class="hidden-element">
                <h4>Hidden Element 2 (Now Visible!)</h4>
                <p>Another hidden element that becomes visible.</p>
                <button id="hidden-btn-2" class="warning" onclick="handleClick('hidden-2')">Click Me (Hidden Element 2)</button>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 Test 3: Iframe with Hidden Elements</h2>
            <div class="test-info">
                <strong>What we're testing:</strong> Iframe containing elements that become visible after interaction.
                <br><strong>Expected behavior:</strong> browser_use should handle iframe navigation and detect dynamic elements.
            </div>
            <div class="iframe-container">
                <iframe id="dynamic-iframe" srcdoc="
                    <html><body style='padding: 20px; font-family: Arial;'>
                        <h3>Dynamic Iframe Test</h3>
                        <button id='iframe-reveal-btn' onclick='revealInIframe()'>🎯 Click to Reveal Hidden Button</button>
                        <div id='iframe-hidden-btn' style='display: none; margin-top: 10px;'>
                            <button id='iframe-hidden-element' onclick='handleIframeClick()'>🎉 Hidden Button (Now Visible!)</button>
                        </div>
                        <div id='iframe-result'>Hidden button will appear after clicking reveal...</div>
                        <script>
                            function revealInIframe() {
                                document.getElementById('iframe-hidden-btn').style.display = 'block';
                                document.getElementById('iframe-result').innerHTML = '✅ Hidden button is now visible!';
                            }
                            function handleIframeClick() {
                                document.getElementById('iframe-result').innerHTML = '🎯 Hidden button clicked successfully!';
                            }
                        </script>
                    </body></html>">
                </iframe>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 Test 4: Role-Based Element Detection</h2>
            <div class="test-info">
                <strong>What we're testing:</strong> Elements with specific ARIA roles that browser_use should detect.
                <br><strong>Expected behavior:</strong> browser_use should find elements by role, not just by tag name.
            </div>
            <div class="role-section">
                <div role="button" id="role-button" onclick="handleClick('role-button')" style="cursor: pointer; padding: 10px; background: #e3f2fd; border-radius: 4px;">
                    🎭 Role-based Button (role="button")
                </div>
                <div role="textbox" id="role-textbox" contenteditable="true" style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin: 10px 0;">
                    📝 Editable text area (role="textbox")
                </div>
                <div role="combobox" id="role-combobox" onclick="handleClick('role-combobox')" style="cursor: pointer; padding: 10px; background: #fff3cd; border-radius: 4px;">
                    🔽 Dropdown (role="combobox")
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 Test 5: Search Icon Detection</h2>
            <div class="test-info">
                <strong>What we're testing:</strong> Various search-related elements that browser_use should detect.
                <br><strong>Expected behavior:</strong> browser_use should find search icons, magnifying glasses, and search-related elements.
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button class="search-btn" onclick="handleClick('search-btn')">🔍 Search</button>
                <button class="magnify-btn" onclick="handleClick('magnify-btn')">🔎 Magnify</button>
                <button class="find-btn" onclick="handleClick('find-btn')">📋 Find</button>
                <button class="lookup-btn" onclick="handleClick('lookup-btn')">🔍 Lookup</button>
                <div class="search-icon-large" onclick="handleClick('search-icon-large')" style="font-size: 30px; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 50%;">🔍</div>
            </div>
        </div>

        <div class="test-section">
            <h2>🧹 Cleanup</h2>
            <button id="reset-btn" class="warning" onclick="resetAll()">Reset All Tests</button>
            <button id="clear-log-btn" class="info" onclick="clearLog()">Clear Log</button>
        </div>

        <div class="test-section">
            <h2>📚 How browser_use Actually Works</h2>
            <div class="test-info">
                <h3>🚀 The Real System (Not What We Were Testing Before):</h3>
                <ol>
                    <li><strong>Fast CDP Scanning:</strong> Uses ProbeJS to scan ALL interactive elements in milliseconds</li>
                    <li><strong>Smart Element Detection:</strong> Finds search icons, hidden elements, role-based elements</li>
                    <li><strong>Handle-Free Execution:</strong> Bypasses Playwright waits for maximum speed</li>
                    <li><strong>Dynamic Discovery:</strong> Handles elements that appear after clicks</li>
                    <li><strong>Iframe Navigation:</strong> Automatically handles nested contexts</li>
                </ol>
                <p><strong>Key Point:</strong> browser_use doesn't wait 3 seconds - it scans fast and executes faster!</p>
            </div>
        </div>
    </div>

    <script>
        let clickCounts = {
            'search-icon': 0,
            'hidden-1': 0,
            'hidden-2': 0,
            'role-button': 0,
            'role-combobox': 0,
            'search-btn': 0,
            'magnify-btn': 0,
            'find-btn': 0,
            'lookup-btn': 0,
            'search-icon-large': 0
        };

        function toggleSearch() {
            const searchInput = document.getElementById('search-input');
            const searchResult = document.getElementById('search-result');
            
            if (searchInput.classList.contains('visible')) {
                searchInput.classList.remove('visible');
                searchResult.innerHTML = 'Search input is now hidden. Click the magnifying glass to reveal it.';
            } else {
                searchInput.classList.add('visible');
                searchInput.focus();
                searchResult.innerHTML = '✅ Search input is now visible and focused!';
            }
            
            logClick('search-icon', 'success');
        }

        function revealHiddenElements() {
            document.getElementById('hidden-element-1').classList.add('visible');
            document.getElementById('hidden-element-2').classList.add('visible');
            logClick('reveal-btn', 'success');
        }

        function handleClick(type) {
            clickCounts[type]++;
            const resultElement = document.getElementById(type + '-result');
            if (resultElement) {
                resultElement.innerHTML = \`Clicked <span class='click-counter'>\${clickCounts[type]}</span> times\`;
            }
            
            logClick(type, 'success');
            updateStatus(\`✅ \${type} clicked successfully! (Count: \${clickCounts[type]})\`);
        }

        function logClick(type, status) {
            const log = document.getElementById('click-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = \`[\${timestamp}] \${status.toUpperCase()}: \${type} clicked\`;
            log.innerHTML = logEntry + '<br>' + log.innerHTML;
            
            console.log(\`[browser_use] \${type} clicked via real system\`);
        }

        function updateStatus(message) {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.style.color = '#28a745';
        }

        function resetAll() {
            // Hide search input
            document.getElementById('search-input').classList.remove('visible');
            document.getElementById('search-result').innerHTML = 'Search input is hidden. Click the magnifying glass to reveal it.';
            
            // Hide hidden elements
            document.querySelectorAll('.hidden-element').forEach(el => el.classList.remove('visible'));
            
            // Reset click counts
            clickCounts = Object.fromEntries(Object.keys(clickCounts).map(k => [k, 0]));
            
            updateStatus('🔄 All tests reset. Ready for new testing.');
        }

        function clearLog() {
            document.getElementById('click-log').innerHTML = 'Click log cleared...';
        }

        // Initialize
        updateStatus('🚀 Real browser_use test page loaded. Ready to test the actual system!');
        console.log('[browser_use] Real test page loaded successfully');
        console.log('[browser_use] This page tests the actual browser_use system, not mock implementations');
    </script>
</body>
</html>
    